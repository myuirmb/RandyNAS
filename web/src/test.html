<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Test</title>
    <style>
        progress {
            color: orange;
            /*兼容IE10的已完成进度背景*/
            border: none;
            background: #d7d7d7;
            /*这个属性也可当作Chrome的已完成进度背景，只不过被下面的::progress-bar覆盖了*/
            height: 5px;
        }

        progress::-webkit-progress-bar {
            background: #d7d7d7;
        }

        progress::-webkit-progress-value,
        progress::-moz-progress-bar {
            background: orange;
        }
    </style>
</head>

<body>
    <progress min="0" max="100" value="30">0% complete</progress>
    <input type="file" id="file">
    <input type="button" value="读取图像" onclick="readAsDataURL()">
    <input type="button" value="读取二进制" onclick="">
    <input type="button" value="读取文本文件" onclick="readAsText()">
    <div id="result" name="result"></div>

    <script>
        var result = document.getElementById('result');
        var file = document.getElementById('file');

        function readAsDataURL() {
            var file = document.getElementById('file').files[0];
            var reader = new FileReader();  //创建filereader对象
            reader.readAsDataURL(file);       //读取图片文件
            reader.onload = function (ofile) {
                var resultimg = document.getElementById('result');
                resultimg.innerHTML = '<img src="' + ofile.target.result + '"+alt="">';
            }
        }

        function readAsText() {
            var file = document.getElementById('file').files[0];
            var reader = new FileReader();
            reader.readAsText(file);   //读取文本内容
            reader.onload = function (e) {
                var resulttxt = document.getElementById('result');
                resulttxt.innerHTML = e.target.result;
            }
        }


        createDownload("download.txt", "download file");

        function createDownload(fileName, content) {
            var blob = new Blob([content]);
            var link = document.createElement("a");
            link.innerHTML = fileName;
            link.download = fileName;
            link.href = URL.createObjectURL(blob);
            document.getElementsByTagName("body")[0].appendChild(link);
        }


        var data = '<b style="font-size:32px;color:red;">次碳酸钴</b>';
        var blob = new Blob([data], { "type": "text/html" });
        onload = function () {
            var iframe = document.createElement("iframe");
            iframe.src = URL.createObjectURL(blob);
            document.body.appendChild(iframe);
        }; 
    </script>
</body>

</html>